# Marginal Operating Emissions Rate (MOER) Model Hierarchy
To create MOER models, WattTime applies a causal regression model to empirical data. Where possible, our models are derived from historical time series data including:

* Historical reported hourly emissions to agencies such as the US Environmental Protection Agency (EPA).
* Observed demand, interchange, and generation by fuel type reported to government entities such as the US Energy Information Administration (EIA) or European Network of Transmission System Operators for Electricity (ENTSO-E).
* Observed and forecasted energy prices (LMPs) and curtailment volumes reported by grid operators such as RTO/ISOs. 
* Weather data obtained from sources like Apple WeatherKit.

In some grid regions, not all of this data is made available by grid operators. In these regions, we have a hierarchy of alternative models to produce a MOER with fewer data dependencies. Model accuracy suffers as we rely on less endogenously reported information, however we aim to estimate a MOER signal that is still usable for both AER and Emissionality use cases. 

## The hierarchy of MOER models we currently produce includes:

1. **Binned Regression**: This causal model creates a tree of regressions conditioned on grid operating conditions. These models include factors such as interchange with neighboring balancing authorities, emissions associated with charging pumped hydro storage, and curtailment where applicable. [More information on our binned regression methodology can be (found here)[https://www.watttime.org/app/uploads/2022/10/WattTime-MOER-modeling-20221004.pdf]. This is considered WattTime's highest quality methodology for the MOER signal type.
1. **Average Interchange**: In the BCHYDRO and HQ regions, abundant hydropower resources mean that the internal marginal fuel source is nearly always reservoir based hydropower. Both of these regions are significant net-exporters to other grid regions; BCHYDRO exports to AESO, and the US Northwest, while HQ exports to AESO and NYISO. Because of this interchange, and the fact that additional demand from interchange can not indefinitely cause additional hydropower generation (as reservoirs are limited in their capacities) marginal consumption in either BCHYDRO or HQ restricts the possible export of hydropower generation. These regions have MOERS representative of a blend of the MOER from regions they export to.
1. **Proxy Regression**: This model is used in regions where we have access to some real-time and forecasted information about the status of the grid (such as demand, or energy prices), but are lacking specific ground truth time series data such as emissions or generation by fuel type required to train a binned regression model. To estimate a MOER without this data, we use machine learning clustering algorithms to find similar grids that exist, or existed in the past to the region we are predicting. Once we find a number of cluster â€˜matches' for a proxy region, we regress demand against each fossil fuel type for a number of quantile bins. We then use location specific power plant data obtained through (Climate Trace)[https://climatetrace.org/] to estimate carbon intensities by fuel type. This model produces an inherently less accurate MOER than a binned regression model trained on endogenous data, however it still produces a signal useful for both AER and emissionality use cases by examining the relationship between marginal demand, and economically expected dispatch given a similar supply curve. This is considered a medium quality signal, and we will look to upgrade these models to higher quality binned regression methodologies as data transparency increases.
1. **IFI Harmonized Default Grid Factors**: In regions where no operations data is available, we recommend using a dataset prepared for the United Nations which provides annual grid factor marginal emissions rates. The IFI methodology provides country specific factors for both an Operating Margin and Build Margin. More information about their methodology can be (found here)[https://unfccc.int/sites/default/files/resource/IFITWG_Methodological_approach_to_common_dataset.pdf]. We believe that their methodology for calculating the Operating Margin is likely underestimating the marginality of coal, particularly during low net-demand hours, while their methodology for the Build Margin is a good heuristic for emissionality applications. However, annual values like these should not be used for AER use cases where a granular time series of data is required.

## Selecting a Model from the Hierarchy
WattTime will only produce MOER data using the highest quality model we can produce in each region considering data availability. In most regions this is currently our binned regression model. Multiple model methodologies are only available during a transition period when we are introducing a new methodology in a particular region; during this window we will produce MOERs using both the older (lower quality) methodology, and the newer higher quality methodology. When this occurs, the older model is provided by default, however users may request the newer model using the `model` parameter in the API. Once the model transition period ends, new data will only be produced for the new model, and the default `model` parameter will change. Users may always request historical data from previous model versions. Although major model releases of this type are rare, users may learn about them through the `my-access/` endpoint, which will detail all model versions available for a given region, both currently and historically. WattTime may introduce additional model methodologies in the future as research proceeds.
